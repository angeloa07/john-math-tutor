<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>John's Math Tutor - Interactive Worksheets</title>

    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Noto+Sans:wght@400;600;700&display=swap");

      :root {
        --bg: #f0f9ff;
      }

      body {
        font-family: "Noto Sans", sans-serif;
        background-color: var(--bg);
        -webkit-tap-highlight-color: transparent;
      }

      /* Friendly headline font */
      .kid-font {
        font-family: "Comic Neue", "Noto Sans", sans-serif;
      }

      /* Subtle fade */
      .fade-in {
        animation: fadeIn 0.35s cubic-bezier(0.4, 0, 0.2, 1);
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0px);
        }
      }

      input {
        font-size: 1.25rem;
      }

      /* Fraction styling */
      .fraction {
        display: inline-block;
        vertical-align: middle;
        text-align: center;
        margin: 0 4px;
        font-size: 0.95em;
        font-weight: bold;
      }
      .fraction .top {
        display: block;
        border-bottom: 2px solid currentColor;
        padding: 0 2px;
        line-height: 1.2;
      }
      .fraction .bottom {
        display: block;
        padding: 0 2px;
        line-height: 1.2;
      }

      /* Tiny confetti dots */
      .confetti {
        position: fixed;
        inset: 0;
        pointer-events: none;
        overflow: hidden;
        z-index: 60;
      }
      .confetti-dot {
        position: absolute;
        width: 8px;
        height: 8px;
        border-radius: 999px;
        opacity: 0;
        animation: pop 900ms ease-out forwards;
      }
      @keyframes pop {
        0% {
          transform: translate3d(var(--x0), var(--y0), 0) scale(0.6);
          opacity: 0;
        }
        15% {
          opacity: 1;
        }
        100% {
          transform: translate3d(var(--x1), var(--y1), 0) scale(1);
          opacity: 0;
        }
      }
      
      .locked-pattern {
        background-image: repeating-linear-gradient(45deg, #f3f4f6 25%, transparent 25%, transparent 75%, #f3f4f6 75%, #f3f4f6), repeating-linear-gradient(45deg, #f3f4f6 25%, #fff 25%, #fff 75%, #f3f4f6 75%, #f3f4f6);
        background-position: 0 0, 10px 10px;
        background-size: 20px 20px;
      }

      /* Remove “rubber band” on iOS button taps */
      button {
        -webkit-tap-highlight-color: transparent;
      }
    </style>
  </head>

  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useEffect, useMemo, useRef, useState } = React;

      // -----------------------
      // Icons
      // -----------------------
      const IconCheck = (
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" className="text-green-600"><polyline points="20 6 9 17 4 12"></polyline></svg>
      );
      const IconX = (
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" className="text-rose-600"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
      );
      const IconBrain = (
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.2" strokeLinecap="round" strokeLinejoin="round" className="text-purple-600"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"></path><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"></path></svg>
      );
      const IconHelp = (
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.2" strokeLinecap="round" strokeLinejoin="round" className="text-sky-600"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><path d="M12 17h.01"></path></svg>
      );
      const IconArrowRight = (
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
      );
      const IconVolume = (
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.2" strokeLinecap="round" strokeLinejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path><path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path></svg>
      );
      const IconLock = (
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
      );

      // -----------------------
      // DATA
      // -----------------------
      const TEST_DATA = {
            3: { title: "Test 3", columns: { A: [{id:'t3a1',q:"2 + 5 + 2 =",a:["9"],h1:"Start with 2 + 5. That makes 7. Then add 2 more.",h2:"2 + 5 = 7. 7 + 2 = 9."},{id:'t3a2',q:"8 - 0 =",a:["8"],h1:"If you take away zero, you take away nothing at all.",h2:"The number stays the same: 8."},{id:'t3a3',q:"6 + [ ] = 10",a:["4"],h1:"Start at 6 and count up to 10 on your fingers.",h2:"6... 7, 8, 9, 10. That was 4 fingers."},{id:'t3a4',q:"3 = 10 - [ ]",a:["7"],h1:"10 take away what number leaves you with 3?",h2:"10 - 7 = 3."},{id:'t3a5',q:"10 + 7 =",a:["17"],h1:"1 ten and 7 ones put together.",h2:"10 + 7 is 17."},{id:'t3a6',q:"14 - 10 =",a:["4"],h1:"14 is made of a 10 and a 4. Take away the 10.",h2:"You are left with just the 4."},{id:'t3a7',q:"5c + 2c + 1c + 2c =",a:["10","10c"],h1:"Try adding them in counting order: 5, then 2 more, then 1, then 2.",h2:"5 + 2 is 7. 7 + 1 is 8. 8 + 2 is 10."},{id:'t3a8',q:"10c - 8c =",a:["2","2c"],h1:"Count backwards 8 steps from 10.",h2:"10 - 8 = 2."},{id:'t3a9',q:"12 - [ ] = 2",a:["10"],h1:"12 is a 10 and a 2. If you want to have only 2 left, what must you take away?",h2:"You must take away the 10."},{id:'t3a10',q:"$10 + [ ] = $15",a:["5","$5"],h1:"How many more steps from 10 to get to 15?",h2:"You need 5 more dollars."}], B: [{id:'t3b1',q:"Write '14' as a word.",a:["fourteen"],h1:"It sounds like 'four' and 'teen'.",h2:"Spell it: F-O-U-R-T-E-E-N."},{id:'t3b2',q:"What is the missing number? 18, 17, 16, [ ], 14, 13",a:["15"],h1:"We are counting backwards by 1.",h2:"The number before 16 is 15."},{id:'t3b3',q:"Double 5.",a:["10"],h1:"'Double' means adding the same number to itself. 5 + 5.",h2:"5 + 5 = 10."},{id:'t3b4',q:"Find the total of these notes: $10, $20, $50",a:["80","$80"],h1:"Start with the biggest: 50 + 20. Then add 10.",h2:"50 + 20 is 70. 70 + 10 is 80."},{id:'t3b5',q:"Subtract 6 from 10.",a:["4"],h1:"This means 10 take away 6.",h2:"10 - 6 = 4."},{id:'t3b6',q:"What number is added to 9 to make 19?",a:["10"],h1:"19 is 1 ten and 9 ones. You already have the 9 ones.",h2:"You need to add the 10."},{id:'t3b7',q:"Find the change from a $10 note after spending $4.",a:["6","$6"],h1:"Change is what is left over. 10 - 4.",h2:"10 - 4 = 6."},{id:'t3b8',q:"Which is the even number? 9, 11, 13, 15, 16, 17",a:["16"],h1:"Even numbers end in 0, 2, 4, 6, or 8. They can be shared equally by two people.",h2:"16 is the only one ending in an even number (6)."},{id:'t3b9',q:"Increase 1 by 10. Write the number as a word.",a:["eleven"],h1:"'Increase' means add. 1 + 10.",h2:"1 + 10 is 11. Spell it: E-L-E-V-E-N."},{id:'t3b10',q:"Olivia spends $3 and $5. How much change from a $10 note?",a:["2","$2"],h1:"First, find out how much she spent in total: 3 + 5.",h2:"She spent $8. Now do 10 - 8."}], C: [{id:'t3c1',type:'abacus_14',q:"Write the word for the number shown on the abacus.",a:["fourteen"],h1:"The first column is Tens (1 bead). The second is Units (4 beads).",h2:"1 ten and 4 units makes 14. Spell it: Fourteen."},{id:'t3c2',q:"At a party there were 17 plates of food. 10 are eaten. How many are left?",a:["7"],h1:"This is a subtraction: 17 - 10.",h2:"17 is 10 and 7. If you eat the 10, only 7 are left."},{id:'t3c3',q:"Sophie's cat is 11 years old. How old will the cat be in 6 years' time?",a:["17"],h1:"'In 6 years time' means the cat will be older. Add 6 to 11.",h2:"11 + 6 = 17."},{id:'t3c4',q:"What number is taken from 19 to leave 12?",a:["7"],h1:"19 take away something equals 12.",h2:"Look at the units: 9 take away what equals 2? It is 7."},{id:'t3c5',type:'lines_19',q:"Find the total length of the three lines.",a:["19","19cm"],h1:"Add the numbers together: 2 + 7 + 10.",h2:"2 + 7 is 9. Then 9 + 10 is 19."},{id:'t3c6',q:"What is the difference in centimetres between the longest and shortest lines?",a:["8"],h1:"Longest is 10. Shortest is 2. 'Difference' means subtract.",h2:"10 - 2 = 8."},{id:'t3c7',q:"If Monday is the first day of the week, name the fourth day.",a:["thursday"],h1:"Count them: 1=Mon, 2=Tue, 3=Wed...",h2:"The 4th day is Thursday."},{id:'t3c8',q:"How many 2c coins have the same value as a 10c coin?",a:["5"],h1:"Count up in 2s until you reach 10.",h2:"2, 4, 6, 8, 10. That is 5 coins."},{id:'t3c9',type:'clock_10',q:"What is the time after 3 hours?",a:["1","1:00","1 oclock"],h1:"The clock shows 10:00. Count forward 3 hours from 10.",h2:"10... 11, 12, 1. It will be 1 o'clock."},{id:'t3c10',q:"Hassan has two coins in his pocket with a total value of 12c. Name both coins.",a:["10c 2c","10 2"],h1:"Think about how to make 12 using a ten and units.",h2:"A 10c coin and a 2c coin."}] } },
            4: { title: "Test 4", columns: { A: [{id:'t4a1',q:"0 + 7 + 0 =",a:["7"],h1:"Zero is nothing. Imagine adding nothing to 7.",h2:"The answer is just 7."},{id:'t4a2',q:"9 + 3 - 5 =",a:["7"],h1:"Start with 9 + 3.",h2:"9 + 3 = 12. Now take away 5 from 12."},{id:'t4a3',q:"10 + [ ] = 13",a:["3"],h1:"How many ones do you add to a ten to get 13?",h2:"13 is one 10 and three 1s. So you add 3."},{id:'t4a4',q:"2 + 8 =",a:["10"],h1:"This is a number bond to 10.",h2:"2 and 8 always make 10."},{id:'t4a5',q:"6 + [ ] = 10",a:["4"],h1:"How many more to get from 6 to 10?",h2:"Count up: 7, 8, 9, 10. That's 4 numbers."},{id:'t4a6',q:"[ ] - 5 = 10",a:["15"],h1:"Something take away 5 is 10. Think backwards: 10 + 5.",h2:"10 + 5 = 15."},{id:'t4a7',q:"What comes next? 4, 8, 12, 16, [ ]",a:["20"],h1:"We are counting in 4s. Add 4 to 16.",h2:"16 + 4 = 20."},{id:'t4a8',q:"One 20c = one 10c + [ ]c",a:["10"],h1:"You have 10c. How much more to make 20c?",h2:"10 + 10 = 20. So you need another 10c."},{id:'t4a9',q:"0 + [ ] = 10",a:["10"],h1:"If you start with 0, you need the whole 10 to make 10.",h2:"The answer is 10."},{id:'t4a10',q:"10cm + 6cm =",a:["16"],h1:"1 ten and 6 ones.",h2:"10 + 6 = 16."}], B: [{id:'t4b1',q:"How many more dots are needed to make eighteen? (Assume 10)",a:["8"],h1:"You have 10. You want 18. How many more?",h2:"18 is 10 + 8. You need 8 more."},{id:'t4b2',q:"One 20c = one 10c + [ ] 5c coins",a:["2"],h1:"First, you need another 10c to make 20c. How many 5cs make 10c?",h2:"5 + 5 = 10. So you need 2 coins."},{id:'t4b3',q:"Write the correct sign, + or -, in place of: 13 [ ] 4 = 17",a:["+"],h1:"The number got bigger (from 13 to 17), so we must have added.",h2:"The sign is +."},{id:'t4b4',q:"What number is added to 4 to make 16?",a:["12"],h1:"Count up from 4 to 16, or do 16 - 4.",h2:"16 - 4 = 12."},{id:'t4b5',q:"Decrease 20 by 5.",a:["15"],h1:"'Decrease' means make smaller or subtract.",h2:"20 - 5 = 15."},{id:'t4b6',q:"Which is the eighth letter in the row? A C E G H J M O P W",a:["O","o"],h1:"Count along the letters: 1, 2, 3, 4, 5, 6, 7, 8.",h2:"The 8th letter is O."},{id:'t4b7',q:"Find the change from one 10c after spending 7c.",a:["3","3c"],h1:"10 take away 7.",h2:"3 and 7 make 10. The answer is 3."},{id:'t4b8',q:"Find the sum of 3, 4, 0 and 10.",a:["17"],h1:"'Sum' means add them all up. 3 + 4 + 0 + 10.",h2:"3+4=7. 7+0=7. 7+10=17."},{id:'t4b9',q:"Ten plus eight minus seven.",a:["11"],h1:"10 + 8 is 18. Now take away 7.",h2:"18 - 7 = 11."},{id:'t4b10',q:"Which is the odd number? 4 6 12 15 18 20",a:["15"],h1:"Odd numbers end in 1, 3, 5, 7, or 9.",h2:"15 ends in 5, so it is odd."}], C: [{id:'t4c1',type:'coins_19',q:"Find the total value of these coins.",a:["19","19c"],h1:"Start with the biggest: 10 + 5. Then add the 2s.",h2:"10+5=15. 15+2=17. 17+2=19."},{id:'t4c2',q:"If the date is 4 May, what is the date 10 days later?",a:["14","14th"],h1:"Add 10 to the date. 4 + 10.",h2:"It will be the 14th."},{id:'t4c3',q:"The length of a piece of wood is 17cm. How many centimetres are sawn off to leave 10cm?",a:["7"],h1:"17 take away what equals 10?",h2:"You must take away the 7."},{id:'t4c4',q:"Ellie has 5c. Her sister has twice as much. Find the total of their money.",a:["15","15c"],h1:"First find the sister's money. Double 5 is 10.",h2:"Now add Ellie's (5) and Sister's (10). Total is 15."},{id:'t4c5',q:"What is the missing number? 4 + 10 + [ ] = 19",a:["5"],h1:"First do 4 + 10. That is 14.",h2:"How many more from 14 to get to 19? It's 5."},{id:'t4c6',q:"I spent 12c, 3c and 4c. How much change did I receive from one 20c?",a:["1","1c"],h1:"Add up the spending first: 12 + 3 + 4 = 19.",h2:"20 - 19 = 1."},{id:'t4c7',q:"Sam is 18 years old. How old was he 7 years ago?",a:["11"],h1:"'Ago' means back in time. Subtract 7.",h2:"18 - 7 = 11."},{id:'t4c8',q:"16 people were on a bus. Seven got off and three got on. How many people were then on the bus?",a:["12"],h1:"Step 1: 16 - 7 = 9.",h2:"Step 2: 9 + 3 = 12."},{id:'t4c9a',type:'shapes_XZ',q:"(a) Which of these shapes is a square?",a:["X"],h1:"A square has 4 equal straight sides.",h2:"X is the square."},{id:'t4c9b',q:"(b) Which of these shapes is a circle?",a:["Z"],h1:"A circle is round like a ball.",h2:"Z is the circle."},{id:'t4c10',q:"On checking his answers to part C of this test, James had three wrong. How many had he correct? (Total 10)",a:["7"],h1:"There are 10 questions in total. He got 3 wrong.",h2:"10 - 3 = 7 correct."}] } },
            5: { title: "Test 5", columns: { A: [{id:'t5a1',q:"13 + [ ] = 18",a:["5"],h1:"Count up from 13 to 18.",h2:"13... 14, 15, 16, 17, 18. That's 5."},{id:'t5a2',q:"14 - [ ] = 4",a:["10"],h1:"14 is made of 10 and 4.",h2:"If you take away the 10, you are left with 4."},{id:'t5a3',q:"18 = 1 ten + [ ] ones",a:["8"],h1:"Look at the last digit of 18.",h2:"It has 8 ones."},{id:'t5a4',q:"3 + 8 =",a:["11"],h1:"Put 8 in your head (it's bigger) and count on 3.",h2:"8... 9, 10, 11."},{id:'t5a5',q:"9c + 4c =",a:["13","13c"],h1:"Make 10 first. 9 needs 1 more to be 10.",h2:"Take 1 from 4 to make the 9 a 10. 10 + 3 = 13."},{id:'t5a6',q:"5cm + 7cm =",a:["12","12cm"],h1:"Think of 5 + 5 = 10.",h2:"7 is 2 bigger than 5. So the answer is 10 + 2 = 12."},{id:'t5a7',q:"12 - 9 =",a:["3"],h1:"Count up from 9 to 12.",h2:"9... 10, 11, 12. That's 3."},{id:'t5a8',q:"15c - 8c =",a:["7","7c"],h1:"8 is close to 10. 15 - 10 = 5.",h2:"Because you took away too many (10 instead of 8), add 2 back. 5 + 2 = 7."},{id:'t5a9',q:"11cm - 8cm =",a:["3","3cm"],h1:"Count up from 8 to 11.",h2:"8... 9, 10, 11. That's 3."},{id:'t5a10',q:"5 + [ ] = 13",a:["8"],h1:"13 - 5.",h2:"Count back 5 from 13. Answer is 8."}], B: [{id:'t5b1',q:"What number when added to 10 makes 19?",a:["9"],h1:"19 is 10 and...?",h2:"9."},{id:'t5b2',q:"Take 7 from 18.",a:["11"],h1:"18 - 7.",h2:"8 - 7 is 1. Keep the ten. Answer is 11."},{id:'t5b3',q:"Increase 6 by 5.",a:["11"],h1:"'Increase' means add. 6 + 5.",h2:"6 + 5 = 11."},{id:'t5b4a',type:'square_quarter',q:"Write the part of the square that is shaded (a) as a word.",a:["quarter"],h1:"The square is cut into 4 equal pieces. One is shaded.",h2:"One of four parts is called a 'quarter'."},{id:'t5b4b',q:"Write the part of the square that is shaded (b) in digits.",a:["1/4"],h1:"We write it as 1 over 4.",h2:"1/4"},{id:'t5b5',q:"From 13c take 7c.",a:["6","6c"],h1:"13 - 7.",h2:"Count back 3 to get to 10, then 4 more. Answer is 6."},{id:'t5b6',q:"Find the sum of 6 and 9.",a:["15"],h1:"'Sum' means add. 9 + 6.",h2:"Make the 9 a 10. 10 + 5 = 15."},{id:'t5b7',q:"17 minus 8.",a:["9"],h1:"Think: 17 - 7 = 10. Take 1 more away.",h2:"9."},{id:'t5b8',q:"6 plus 7.",a:["13"],h1:"Double 6 is 12.",h2:"7 is one more than 6, so add 1 to 12. Answer 13."},{id:'t5b9',q:"What is the difference between 3c and 11c?",a:["8","8c"],h1:"11 - 3.",h2:"Count up from 3 to 11. Answer is 8."},{id:'t5b10',q:"Find the total of 7 and the next odd number greater than 7.",a:["16"],h1:"The odd numbers are 1, 3, 5, 7, 9... What is after 7?",h2:"The next odd number is 9. So 7 + 9 = 16."}], C: [{id:'t5c1',q:"What is the value of the missing coin? 5c + 10c + [ ] = 17c",a:["2","2c"],h1:"Add what you have: 5 + 10 = 15.",h2:"15 + ? = 17. You need 2c."},{id:'t5c2',q:"By how many is 8 + 8 more than 9?",a:["7"],h1:"First do 8 + 8. That's 16.",h2:"Now find the difference between 16 and 9. 16 - 9 = 7."},{id:'t5c3',q:"The date is 8 June. What is the date one week later?",a:["15","15th"],h1:"A week has 7 days. Add 7 to 8.",h2:"8 + 7 = 15."},{id:'t5c4',q:"Yasmin has 4c less than her brother who has 13c. How much has Yasmin?",a:["9","9c"],h1:"'Less' means subtract. 13 - 4.",h2:"13 - 4 = 9."},{id:'t5c5',q:"A sandwich is cut into four equal parts. Write the name of each part.",a:["quarter"],h1:"1 part out of 4 equal parts.",h2:"Quarter."},{id:'t5c6',q:"What is the next even number that is greater than 10?",a:["12"],h1:"Even numbers go 2, 4, 6, 8, 10, ...",h2:"12."},{id:'t5c7',q:"A line is 12cm long. At what measurement is its middle point?",a:["6","6cm"],h1:"The middle point is exactly half way.",h2:"Half of 12 is 6."},{id:'t5c8',q:"Matthew has twice as much money as his brother, who has $4. How many dollars have they altogether?",a:["12","$12"],h1:"Brother has 4. Matthew has double (8).",h2:"'Altogether' means add them: 4 + 8 = 12."},{id:'t5c9',type:'clock_230',q:"Write in words the time shown on the clock.",a:["half past two","two thirty"],h1:"The long hand is on the 6, which means 'half past'.",h2:"The short hand has passed 2. It is Half Past Two."},{id:'t5c10',q:"Ali has 18c. He spends 7c and 4c. How much has he left?",a:["7","7c"],h1:"Total spent: 7 + 4 = 11.",h2:"18 - 11 = 7."}] } },
            6: { title: "Test 6", columns: { A: [{id:'t6a1',q:"2 tens + [ ] ones = 20",a:["0"],h1:"2 tens is 10 + 10, which is 20.",h2:"You already have 20, so you need 0 ones."},{id:'t6a2',q:"[ ] - 10 = 2",a:["12"],h1:"Something take away 10 is 2. Think backwards: 10 + 2.",h2:"10 + 2 = 12."},{id:'t6a3',q:"7 + 7 =",a:["14"],h1:"Double 7.",h2:"14."},{id:'t6a4',q:"3c + 9c =",a:["12","12c"],h1:"Put 9 in your head and add 3.",h2:"9... 10, 11, 12."},{id:'t6a5',q:"[ ] + 4 = 19",a:["15"],h1:"19 take away 4.",h2:"9 - 4 is 5. Keep the ten. 15."},{id:'t6a6',q:"8cm + 6cm =",a:["14","14cm"],h1:"8 + 2 is 10. You have 4 left.",h2:"10 + 4 = 14."},{id:'t6a7',q:"13 - 5 =",a:["8"],h1:"Count back 5 from 13.",h2:"8."},{id:'t6a8',q:"What comes next? 8, 16, 24, 32, [ ]",a:["40"],h1:"We are counting in 8s. Add 8 to 32.",h2:"32 + 8 = 40."},{id:'t6a9',q:"11cm - 4cm =",a:["7","7cm"],h1:"11 - 4.",h2:"7."},{id:'t6a10',q:"16 - [ ] = 7",a:["9"],h1:"16 take away what equals 7?",h2:"16 - 7 = 9."}], B: [{id:'t6b1',q:"How many 2c coins are worth two 5c coins?",a:["5"],h1:"Two 5cs make 10c. How many 2s in 10?",h2:"Count in 2s: 2, 4, 6, 8, 10. That's 5."},{id:'t6b2',q:"By how many is 6 less than 14?",a:["8"],h1:"Find the difference between 14 and 6.",h2:"14 - 6 = 8."},{id:'t6b3',q:"What number when added to 8 makes 13?",a:["5"],h1:"8 + ? = 13.",h2:"Count up from 8 to 13. It's 5."},{id:'t6b4',q:"Subtract 9c from 18c.",a:["9","9c"],h1:"Half of 18 is 9.",h2:"18 - 9 = 9."},{id:'t6b5',q:"Decrease 12 by 4.",a:["8"],h1:"'Decrease' means subtract.",h2:"12 - 4 = 8."},{id:'t6b6',q:"Add the first three even numbers.",a:["12"],h1:"The first three even numbers are 2, 4, 6.",h2:"2 + 4 = 6. Then 6 + 6 = 12."},{id:'t6b7',q:"Find the difference between the biggest and smallest of these amounts of money: 9c 3c 11c 7c 18c",a:["15","15c"],h1:"Biggest is 18. Smallest is 3.",h2:"18 - 3 = 15."},{id:'t6b8',q:"8 plus 3 minus 5.",a:["6"],h1:"8 + 3 = 11.",h2:"11 - 5 = 6."},{id:'t6b9',q:"6 + 7 = 10 + [ ]",a:["3"],h1:"First, 6 + 7 is 13.",h2:"13 is 10 plus what? 3."},{id:'t6b10a',type:'circle_quarter',q:"Write the part of the circle that is shaded: (a) as a word.",a:["quarter"],h1:"The circle is cut into 4 equal pieces. One is shaded.",h2:"One of four parts is called a 'quarter'."},{id:'t6b10b',q:"Write the part of the circle that is shaded: (b) in digits.",a:["1/4"],h1:"We write it as 1 over 4.",h2:"1/4"}], C: [{id:'t6c1',q:"Sanjay is 8 years old. How old will he be in 4 years' time?",a:["12"],h1:"Add 4 to 8.",h2:"8 + 4 = 12."},{id:'t6c2',q:"Take zero from thirteen.",a:["13"],h1:"Taking zero changes nothing.",h2:"13."},{id:'t6c3',q:"Ruby gave two 5cs, two 2cs and three 1cs to pay for a pencil. How much did the pencil cost?",a:["17","17c"],h1:"2x5=10. 2x2=4. 3x1=3.",h2:"10 + 4 + 3 = 17."},{id:'t6c4',q:"How many half oranges can be cut from three whole oranges?",a:["6"],h1:"Each orange gives 2 halves.",h2:"3 oranges x 2 halves = 6 halves."},{id:'t6c5a',type:'circle_half',q:"Write the part of the circle that is shaded (a) as a word.",a:["half"],h1:"The circle is cut in 2. One part is shaded.",h2:"Half."},{id:'t6c5b',q:"Write the part of the circle that is shaded (b) in digits.",a:["1/2"],h1:"We write half as 1 over 2.",h2:"1/2"},{id:'t6c6',q:"Write in words the name of the day of the week that follows Tuesday.",a:["wednesday"],h1:"Mon, Tue...",h2:"Wednesday."},{id:'t6c7',q:"There are five men, six women and eight children on a bus. How many people are there in total on the bus?",a:["19"],h1:"Add them all: 5 + 6 + 8.",h2:"5 + 6 = 11. 11 + 8 = 19."},{id:'t6c8',q:"Josh has a half and his friend has a quarter of a cake. What fraction of the cake is left?",a:["quarter","one quarter"],h1:"A whole cake has 4 quarters. Josh ate half (2 quarters). Friend ate 1 quarter. Total ate = 3 quarters.",h2:"4 quarters - 3 quarters = 1 quarter left."},{id:'t6c9',q:"How many days are there in a fortnight?",a:["14"],h1:"A fortnight is 2 weeks.",h2:"7 + 7 = 14."},{id:'t6c10',type:'triangles_VXZ',q:"Write the letters of the shapes that are triangles.",a:["VXZ","V X Z"],h1:"Triangles have 3 straight sides.",h2:"V, X and Z are triangles."}] } },
            7: { title: "Test 7", columns: { A: [{id:'t7a1',q:"8 + [ ] = 19",a:["11"],h1:"Count up from 8 to 19.",h2:"19 - 8 = 11."},{id:'t7a2',q:"[ ] - 7 = 10",a:["17"],h1:"Think backwards: 10 + 7.",h2:"17."},{id:'t7a3',q:"1 ten + [ ] ones = 14",a:["4"],h1:"Look at the units digit in 14.",h2:"4."},{id:'t7a4',q:"8c + 7c =",a:["15","15c"],h1:"8 + 8 is 16, so 8 + 7 is one less.",h2:"15."},{id:'t7a5',q:"2 + 9 =",a:["11"],h1:"9 + 2.",h2:"11."},{id:'t7a6',q:"14 - 5 =",a:["9"],h1:"Take 4 away to get to 10, then 1 more.",h2:"9."},{id:'t7a7',q:"3 + 6 = 9 + [ ]",a:["0"],h1:"3 + 6 is 9.",h2:"9 equals 9 + 0."},{id:'t7a8',q:"10 - 5 = 12 - [ ]",a:["7"],h1:"10 - 5 is 5. So 12 take away what equals 5?",h2:"12 - 7 = 5."},{id:'t7a9',q:"1/2 + 1/4 =",a:["3/4","three quarters"],h1:"Imagine a pizza. 1/2 is two slices. 1/4 is one slice. Total slices?",h2:"2 slices + 1 slice = 3 slices (3/4)."},{id:'t7a10',q:"6 + 7 = 7 + [ ]",a:["6"],h1:"It doesn't matter what order you add numbers.",h2:"If you swap them, it's 6."}], B: [{id:'t7b1',q:"What number when added to 4 makes 13?",a:["9"],h1:"13 - 4.",h2:"9."},{id:'t7b2',q:"9 is [ ] less than 16.",a:["7"],h1:"This means 'What is the difference between 16 and 9?'",h2:"16 - 9 = 7."},{id:'t7b3',q:"18 is [ ] more than 9.",a:["9"],h1:"18 - 9.",h2:"9."},{id:'t7b4',q:"Write the missing word. 1 whole one = four [ ]",a:["quarters"],h1:"If you cut a pizza into 4 pieces, what are the pieces called?",h2:"Quarters."},{id:'t7b5',q:"From a dozen subtract 7.",a:["5"],h1:"A dozen means 12.",h2:"12 - 7 = 5."},{id:'t7b6',q:"How much change is left from one 10c after spending two 2c coins?",a:["6","6c"],h1:"Spent: 2 + 2 = 4c.",h2:"10 - 4 = 6."},{id:'t7b7a',q:"There are 60 minutes in 1 hour. How many minutes in (a) 1/2 h?",a:["30"],h1:"Half of 60.",h2:"30 + 30 = 60. So it's 30."},{id:'t7b7b',q:"There are 60 minutes in 1 hour. How many minutes in (b) 1/4 h?",a:["15"],h1:"Half of 30.",h2:"15."},{id:'t7b8',q:"What odd number is bigger than 11 but less than 15?",a:["13"],h1:"Count up from 11: 12, 13, 14. Which is odd?",h2:"13 is the odd number."},{id:'t7b9',q:"8 plus 7 minus 10",a:["5"],h1:"8 + 7 = 15.",h2:"15 - 10 = 5."},{id:'t7b10',q:"Name the fourth month of the year.",a:["april"],h1:"January, February, March...",h2:"April."}], C: [{id:'t7c1',type:'lines_ABC',q:"Which of these lines is the shortest, A, B or C?",a:["A"],h1:"Look at the diagram. Which one isn't long?",h2:"Line A is the short one."},{id:'t7c2',q:"Harry is 11 years old. Olivia is three years younger. How old is Olivia?",a:["8"],h1:"'Younger' means subtract age. 11 - 3.",h2:"8."},{id:'t7c3',q:"Nadeen has nine 1cs. She changes them for three coins. Write the value of each coin.",a:["5c 2c 2c","5 2 2"],h1:"She has 9c total. Find 3 coins that add up to 9.",h2:"5 + 2 + 2 = 9."},{id:'t7c4',q:"Eva has half a pizza and shares the rest equally between two friends. What fraction does each of her friends have?",a:["quarter","1/4"],h1:"Eva took half. Half is left. Half of a half is a quarter.",h2:"Quarter."},{id:'t7c5',type:'picto_snacks',q:"How many children chose crisps as their favourite snack?",a:["4"],h1:"Count the faces in the 'crisps' row.",h2:"There are 4 faces."},{id:'t7c6',q:"Write the correct sign <, > or = in place of: 3+10 [ ] 18-5",a:["="],h1:"< means less than (smaller). > means greater than (bigger). = means equal.",h2:"3+10=13. 18-5=13. They are equal (=)."},{id:'t7c7',q:"Find the total of one 10c, three 2cs and two 1cs.",a:["18","18c"],h1:"10 + (2+2+2) + (1+1).",h2:"10 + 6 + 2 = 18."},{id:'t7c8',q:"Name the month that comes next after December.",a:["january"],h1:"December is the last month. We start again.",h2:"January."},{id:'t7c9',q:"What length is added to 8cm and 6cm to make 20cm?",a:["6","6cm"],h1:"8 + 6 = 14. How many more to get 20?",h2:"20 - 14 = 6."},{id:'t7c10',type:'shape_rect',q:"Write the name of this shape.",a:["rectangle"],h1:"It has 4 straight sides and 4 square corners, like a door.",h2:"It is a Rectangle."}] } },
            8: { title: "Test 8", columns: { A: [{id:'t8a1',q:"[ ] + 4 = 17",a:["13"],h1:"17 - 4.",h2:"13."},{id:'t8a2',q:"13 - [ ] = 3",a:["10"],h1:"13 take away what equals 3?",h2:"10."},{id:'t8a3',q:"8 + 5 = [ ] + 8",a:["5"],h1:"It's a mirror image. The numbers just swapped places.",h2:"5."},{id:'t8a4',q:"17 = 1 ten + [ ] ones",a:["7"],h1:"Look at the units digit.",h2:"7."},{id:'t8a5',q:"1/2 - 1/4 =",a:["1/4","quarter"],h1:"Imagine half a pizza (2 slices). Take away 1 slice (1/4).",h2:"You have 1 slice left (1/4)."},{id:'t8a6',q:"6 + 6 =",a:["12"],h1:"Double 6.",h2:"12."},{id:'t8a7',q:"9c + 8c =",a:["17","17c"],h1:"Double 8 is 16. Add 1 more for the 9.",h2:"17."},{id:'t8a8',q:"16cm - 9cm =",a:["7","7cm"],h1:"16 - 6 = 10. Take 3 more away.",h2:"7."},{id:'t8a9',q:"7 + 5 + 5 =",a:["17"],h1:"Do 5 + 5 first (it's 10). Then add 7.",h2:"17."},{id:'t8a10',q:"18 - 7 - 6 =",a:["5"],h1:"18 - 7 = 11. Now 11 - 6.",h2:"5."}], B: [{id:'t8b1',q:"Write the correct sign <, > or = in place of: 4+0 [ ] 13-9",a:["="],h1:"< is less than. > is greater than. Work out both sides.",h2:"4+0=4. 13-9=4. They are equal (=)."},{id:'t8b2',q:"Name the eighth month of the year.",a:["august"],h1:"Count from January.",h2:"August."},{id:'t8b3',q:"Find the difference between 3cm + 7cm and 19cm.",a:["9","9cm"],h1:"3 + 7 = 10. Difference between 10 and 19?",h2:"9."},{id:'t8b4',q:"15c is [ ] more than 8c.",a:["7","7c"],h1:"15 - 8.",h2:"7."},{id:'t8b5',q:"Take three-quarters from a whole one.",a:["1/4","quarter"],h1:"A whole is 4 quarters. 4 quarters - 3 quarters.",h2:"1 quarter."},{id:'t8b6',q:"What number is 6 less than the sum of 10 and 4?",a:["8"],h1:"Sum of 10 and 4 is 14. Now find 6 less.",h2:"14 - 6 = 8."},{id:'t8b7',type:'clock_715',q:"What time is it? Write the answer in digits.",a:["7:15"],h1:"The hour hand is past 7. The minute hand is on 3 (15 mins).",h2:"7:15"},{id:'t8b8',q:"Find the total of 8c + 5c + 2c.",a:["15","15c"],h1:"8 + 2 is 10. Add 5.",h2:"15."},{id:'t8b9',q:"What number is added to 13 to make 18?",a:["5"],h1:"18 - 13.",h2:"5."},{id:'t8b10',q:"Find the difference between 17 and the next odd number bigger than 17.",a:["2"],h1:"The odd numbers are 17, 19, 21... The next one is 19.",h2:"19 - 17 = 2."}], C: [{id:'t8c1',q:"Add together the even numbers that are less than 8.",a:["12"],h1:"Evens less than 8 are: 2, 4, 6.",h2:"2 + 4 + 6 = 12."},{id:'t8c2',q:"A banana cost 13c. Emma gave two coins to pay for it. If the coins were of different values, what change did she receive?",a:["2","2c"],h1:"She must have given coins totalling more than 13c. A 10c and a 5c make 15c.",h2:"15c - 13c = 2c change."},{id:'t8c3',type:'line_4cm',q:"Estimate (guess) the correct measurement of the line AB. Is it 10cm, 4cm or 8cm?",a:["4","4cm"],h1:"10cm is very long. 8cm is long. This looks quite short.",h2:"4cm."},{id:'t8c4',q:"Write < or > to make the statement true: 48 [ ] 72",a:["<"],h1:"The crocodile mouth eats the bigger number. 72 is bigger.",h2:"48 < 72 (48 is less than 72)."},{id:'t8c5',q:"Ritvick saved 4c and 12c. How much more must he save to have 20c?",a:["4","4c"],h1:"He has 4 + 12 = 16. How many more to 20?",h2:"20 - 16 = 4."},{id:'t8c6',q:"Three friends each have a quarter of a chocolate bar. What fraction is left?",a:["1/4","quarter"],h1:"3 quarters are eaten. A whole bar has 4 quarters.",h2:"4 - 3 = 1 quarter left."},{id:'t8c7',q:"By how much are three 5cs greater than one 10c and two 2cs?",a:["1","1c"],h1:"Three 5s = 15. 10 + 2 + 2 = 14.",h2:"15 - 14 = 1."},{id:'t8c8',q:"Ahmed had 11 marbles. He lost five and then won 13. How many marbles had he then?",a:["19"],h1:"11 - 5 = 6. Then 6 + 13.",h2:"19."},{id:'t8c9',q:"The three sides of a triangle together measure 17cm. Two sides together measure 11cm. Find the length of the third side.",a:["6","6cm"],h1:"17 - 11.",h2:"6cm."},{id:'t8c10',type:'shape_cube',q:"How many square faces does a cube have?",a:["6"],h1:"Imagine a dice. How many numbers are on it?",h2:"6."}] } },
            9: { title: "Test 9", columns: { A: [{id:'t9a1',q:"8 - 0 + 7 =",a:["15"],h1:"8 - 0 is 8. Then 8 + 7.",h2:"15."},{id:'t9a2',q:"Write the word for the missing number. 0, 10, 20, [ ], 40, 50",a:["thirty"],h1:"Counting in tens.",h2:"Thirty."},{id:'t9a3',q:"1/4 + 1/2 + 1/4 =",a:["1","one","whole"],h1:"Think: quarter + half + quarter. Two quarters make a half.",h2:"Half + Half = 1 whole."},{id:'t9a4',q:"50c = [ ] 10cs",a:["5"],h1:"How many 10s in 50?",h2:"5."},{id:'t9a5',q:"20c + 40c =",a:["60","60c"],h1:"2 tens + 4 tens = 6 tens.",h2:"60c."},{id:'t9a6',q:"5 1/2 + 1/2 =",a:["6"],h1:"5 and a half, add another half.",h2:"Two halves make a whole. 5 + 1 = 6."},{id:'t9a7',q:"50 - 30 =",a:["20"],h1:"5 tens - 3 tens.",h2:"20."},{id:'t9a8',type:'numline_0_100_clean',q:"What number is the arrow pointing to?",a:["50"],h1:"It is exactly in the middle of 0 and 100.",h2:"50."},{id:'t9a9',q:"10 cm = 3 1/2 cm + [ ] cm",a:["6 1/2","6.5"],h1:"Count up from 3 and a half to 10.",h2:"You need another half to get to 4, then 6 more to get to 10. So 6 and a half."},{id:'t9a10',q:"2+2+2+2+2+2 =",a:["12"],h1:"Six lots of 2.",h2:"12."}], B: [{id:'t9b1',q:"Find the total of seven 2cs and one 5c.",a:["19","19c"],h1:"7 x 2 = 14. Then 14 + 5.",h2:"19."},{id:'t9b2',q:"Subtract twenty from fifty.",a:["30"],h1:"50 - 20.",h2:"30."},{id:'t9b3',q:"Write < or > to make this statement true: 97 [ ] 89",a:[">"],h1:"The crocodile eats the bigger number (97).",h2:"97 > 89 (97 is greater than 89)."},{id:'t9b4',q:"How much change from two 10cs after spending 12c?",a:["8","8c"],h1:"You have 20c. 20 - 12.",h2:"8."},{id:'t9b5',q:"Add 10cm to 40cm.",a:["50","50cm"],h1:"10 + 40.",h2:"50."},{id:'t9b6',q:"Eight groups each of two. How many altogether?",a:["16"],h1:"8 x 2.",h2:"16."},{id:'t9b7',q:"How many 5cs have the same value as a 20c coin?",a:["4"],h1:"Count in 5s up to 20.",h2:"5, 10, 15, 20. That's 4."},{id:'t9b8',q:"How many days are in January?",a:["31"],h1:"Knuckle trick! January is a knuckle (long month).",h2:"31."},{id:'t9b9',q:"How many twos are there in 12?",a:["6"],h1:"12 divided by 2.",h2:"6."},{id:'t9b10',q:"Which three different coins together make 17c?",a:["10 5 2","10c 5c 2c"],h1:"Start with largest coins: 10 + 5 + 2.",h2:"10, 5, 2."}], C: [{id:'t9c1',q:"18 treats are shared equally between two kittens. How many each?",a:["9"],h1:"Half of 18.",h2:"9."},{id:'t9c2',type:'ruler_5half',q:"How long is the line AB?",a:["5 1/2","5.5"],h1:"Use the ruler in the picture. It is past 5.",h2:"5 and a half cm."},{id:'t9c3',q:"Twice seven minus nine.",a:["5"],h1:"Twice 7 is 14. 14 - 9.",h2:"5."},{id:'t9c4',q:"Sita spends 11c. She gives one 5c and the rest in 2cs. How many 2cs does she give?",a:["3"],h1:"She needs 11. She gave 5. She needs 6 more. How many 2s in 6?",h2:"3."},{id:'t9c5',q:"If 9 September is on a Monday, on which day is 14 September?",a:["saturday"],h1:"9th=Mon, 10th=Tue, 11th=Wed...",h2:"Saturday."},{id:'t9c6',q:"Martin has 18c. He spends half of it and gives away 2c. How much has he left?",a:["7","7c"],h1:"Half of 18 is 9. Then 9 - 2.",h2:"7."},{id:'t9c7',type:'picto_subjects',q:"How many children chose science as their favourite subject?",a:["4"],h1:"Count the faces for Science.",h2:"4."},{id:'t9c8',q:"A card costs 8c. Find the cost of two cards.",a:["16","16c"],h1:"8 + 8.",h2:"16."},{id:'t9c9',q:"A box of chocolates contains two layers each of 20 chocolates. How many chocolates are in the box?",a:["40"],h1:"20 + 20.",h2:"40."},{id:'t9c10',q:"The lengths of two wooden rods are 7 1/2 cm and 10cm. Find the difference in their lengths.",a:["2 1/2","2.5"],h1:"Count up from 7.5 to 10.",h2:"2 and a half."}] } },
            10: { title: "Test 10", columns: { A: [{id:'t10a1',q:"6 + 0 + 14 =",a:["20"],h1:"6 + 14.",h2:"20."},{id:'t10a2',q:"Write the word for the missing number. 100, 90, 80, [ ], 60.",a:["seventy"],h1:"7 tens.",h2:"Seventy."},{id:'t10a3',q:"90 - 50 =",a:["40"],h1:"9 tens - 5 tens.",h2:"40."},{id:'t10a4',q:"What comes next? 24, 32, 40, [ ]",a:["48"],h1:"We are adding 8 each time.",h2:"40 + 8 = 48."},{id:'t10a5',q:"1 1/2 cm = 10cm - [ ] cm",a:["8 1/2","8.5"],h1:"10 take away what leaves 1.5?",h2:"8 and a half."},{id:'t10a6',q:"[ ] 2c coins = one 20c",a:["10"],h1:"Count in 2s to 20.",h2:"10."},{id:'t10a7',q:"1/2 cm + 1/2 cm + 1/2 cm + 1/2 cm =",a:["2","2cm"],h1:"4 halves make 2 wholes.",h2:"2."},{id:'t10a8',q:"100 = 50 + [ ]",a:["50"],h1:"50 plus what equals 100?",h2:"50."},{id:'t10a9',q:"3c + 6c + 7c =",a:["16","16c"],h1:"3 + 7 = 10. Then add 6.",h2:"16."},{id:'t10a10',q:"4 + 4 + 4 + 4 + 4 =",a:["20"],h1:"5 lots of 4.",h2:"20."}], B: [{id:'t10b1',q:"Find the total of 5c, 7c and 8c.",a:["20","20c"],h1:"7 + 8 = 15. 15 + 5 = 20.",h2:"20."},{id:'t10b2',q:"Take fifty from eighty. Write the word for the answer.",a:["thirty"],h1:"80 - 50.",h2:"Thirty."},{id:'t10b3',q:"Multiply 4 by 6.",a:["24"],h1:"6 + 6 + 6 + 6.",h2:"24."},{id:'t10b4',q:"1/4 of 24.",a:["6"],h1:"Half of 24 is 12. Half of 12 is 6.",h2:"6."},{id:'t10b5',q:"By how many pennies is 20c less than nine 10cs?",a:["70","70c"],h1:"Nine 10s is 90. 90 - 20.",h2:"70."},{id:'t10b6',q:"In which of these months are there 31 days? April, June, August, November.",a:["august"],h1:"Knuckle trick. August is a knuckle.",h2:"August."},{id:'t10b7',type:'numline_0_10_arrow5',q:"What number is the arrow pointing to?",a:["5"],h1:"It's in the middle of 0 and 10.",h2:"5."},{id:'t10b8',q:"Divide 36 by 4.",a:["9"],h1:"How many 4s in 36?",h2:"9."},{id:'t10b9',q:"Write < or > to make the statement true: 99 [ ] 101",a:["<"],h1:"99 is smaller than 101. The arrow points to the small one.",h2:"<"},{id:'t10b10',q:"How many times is 4 added together to make 28?",a:["7"],h1:"4 x ? = 28.",h2:"7."}], C: [{id:'t10c1',type:'abacus_14',q:"Write the word for the number shown on the abacus.",a:["fourteen"],h1:"1 ten bead and 4 unit beads.",h2:"Fourteen."},{id:'t10c2',q:"By how many centimetres is a line of 13 1/2 cm longer than a line of 8cm?",a:["5 1/2","5.5"],h1:"13.5 - 8.",h2:"5 1/2."},{id:'t10c3',q:"Share 20c equally among 4 brothers. How much money do they each receive?",a:["5","5c"],h1:"20 divided by 4.",h2:"5."},{id:'t10c4',q:"If 6 May is a Tuesday, what is the date on Tuesday a fortnight later?",a:["20","20th","20 may"],h1:"Fortnight is 14 days. 6 + 14.",h2:"20th."},{id:'t10c5',q:"A balloon costs 6c. Find the cost of four balloons.",a:["24","24c"],h1:"6 x 4.",h2:"24."},{id:'t10c6',q:"A coat has 10 buttons. How many coats can be made using 100 buttons?",a:["10"],h1:"100 divided by 10.",h2:"10."},{id:'t10c7',q:"Find the total value of these coins. One 50c, two 10cs and one 20c.",a:["90","90c"],h1:"50 + 10 + 10 + 20.",h2:"90."},{id:'t10c8',q:"Rosie spends 38c in a shop and gives a 50c in payment. She receives two coins as change. Which coins are they?",a:["10 2","10c 2c"],h1:"50 - 38 = 12. Make 12c with 2 coins.",h2:"10c and 2c."},{id:'t10c9',type:'flag',q:"Is this flag pole horizontal or vertical?",a:["vertical"],h1:"Standing up tall is vertical. Lying flat is horizontal.",h2:"Vertical."},{id:'t10c10',type:'clocks_diff',q:"What is the difference in minutes between the times on these clocks?",a:["30","30 min"],h1:"One clock is 9:00. The other is 9:30.",h2:"30 minutes."}] } },
            11: { title: "Test 11", columns: { A: [{id:'t11a1',q:"Write in words the missing number. 6, 16, 26, 36, [ ], 56",a:["forty six","forty-six"],h1:"Count in 10s: 36 + 10.",h2:"Forty-six."},{id:'t11a2a',q:"Write these numbers in digits: (a) 4 tens 7 ones",a:["47"],h1:"Put 4 in the tens column and 7 in the units.",h2:"47."},{id:'t11a2b',q:"Write these numbers in digits: (b) 6 tens 3 ones",a:["63"],h1:"6 in tens, 3 in units.",h2:"63."},{id:'t11a3',q:"85 + 10 =",a:["95"],h1:"Add a ten to 80.",h2:"95."},{id:'t11a4',q:"77 - 10 =",a:["67"],h1:"Take a ten from 70.",h2:"67."},{id:'t11a5',q:"1 1/2 - 1/4 =",a:["1 1/4","1.25"],h1:"A half is 2 quarters. 2 quarters - 1 quarter = 1 quarter.",h2:"1 and a quarter."},{id:'t11a6',q:"0 x 4 =",a:["0"],h1:"Nothing times 4 is still nothing.",h2:"0."},{id:'t11a7',q:"8c + 10c + 20c =",a:["38","38c"],h1:"20 + 10 = 30. Add 8.",h2:"38."},{id:'t11a9a',q:"44c = [ ] 20cs",a:["2"],h1:"How many 20s fit into 40?",h2:"2."},{id:'t11a9b',q:"and [ ] 4c",a:["1"],h1:"You have 4c left. How many 4cs is that?",h2:"1."},{id:'t11a9_old',q:"16 divided by 4 =",a:["4"],h1:"Half of 16 is 8. Half of 8 is 4.",h2:"4."},{id:'t11a10',q:"40 = 4 x [ ]",a:["10"],h1:"4 times what is 40?",h2:"10."}], B: [{id:'t11b1',q:"What number is thirteen more than eighty?",a:["93"],h1:"80 + 13.",h2:"93."},{id:'t11b2',q:"From 20c take 13c.",a:["7","7c"],h1:"20 - 13.",h2:"7."},{id:'t11b3',q:"How many days in February this year? (29 in a leap year)",a:["28","29"],h1:"Usually it is 28.",h2:"28 (or 29)."},{id:'t11b4',q:"Find the total value of these coins: 50c, 20c, 5c, 5c, 5c.",a:["85","85c"],h1:"50+20=70. 5+5+5=15.",h2:"85."},{id:'t11b5',q:"The length of a line is 7cm. How long is a line that is 5 times as long as it?",a:["35","35cm"],h1:"7 x 5.",h2:"35."},{id:'t11b6',q:"Which of these numbers is nearest to 60? 58, 64, 56, 61, 63",a:["61"],h1:"61 is only 1 away.",h2:"61."},{id:'t11b7',type:'numline_0_100_arrow70',q:"What number is the arrow pointing to?",a:["70"],h1:"Each notch is 10. 50, 60, ...",h2:"70."},{id:'t11b8',q:"One-quarter of George's money is 8c. How much has he altogether?",a:["32","32c"],h1:"If a quarter is 8, the whole is 8 x 4.",h2:"32."},{id:'t11b9',q:"Finlay gave six 5cs to pay for seven sweets at 4c each. How much change did he receive?",a:["2","2c"],h1:"Gave: 6x5=30. Cost: 7x4=28.",h2:"30 - 28 = 2."},{id:'t11b10',q:"Badges 3 for 20c. How many badges can be bought for 60c?",a:["9"],h1:"60c is 3 lots of 20c. So 3 lots of 3 badges.",h2:"9."}], C: [{id:'t11c1',type:'rods_diff_12_9.5',q:"Find the difference between the lengths of the rods.",a:["2 1/2","2.5","2.5cm"],h1:"12 - 9 1/2.",h2:"2 and a half."},{id:'t11c2',q:"How many hours from 8:15 a.m. to 12:15 p.m.?",a:["4","4h"],h1:"Count hours: 9:15, 10:15, 11:15, 12:15.",h2:"4."},{id:'t11c3',q:"Write in digits the number that equals 9 tens and 7 ones.",a:["97"],h1:"Digits.",h2:"97."},{id:'t11c4',type:'pencil',q:"Is this pencil vertical or horizontal?",a:["horizontal"],h1:"Lying flat like the horizon.",h2:"Horizontal."},{id:'t11c5',q:"Write the correct sign +, -, x or / in place of: 6 [ ] 4 = 24",a:["x","*"],h1:"6 groups of 4 make 24.",h2:"x"},{id:'t11c6',q:"How much change from two $20 notes after spending $31?",a:["9","$9"],h1:"40-31.",h2:"9."},{id:'t11c7',q:"How many halves in six whole ones?",a:["12"],h1:"Each whole has 2 halves. 6 x 2.",h2:"12."},{id:'t11c8',q:"Decrease 70c by 8c.",a:["62","62c"],h1:"70 - 8.",h2:"62."},{id:'t11c9',q:"What number is 3 times bigger than 4?",a:["12"],h1:"3 x 4.",h2:"12."},{id:'t11c10',q:"How many days in September?",a:["30"],h1:"30 days hath...",h2:"30."}] } },
            12: { title: "Test 12", columns: { A: [{id:'t12a1',q:"Write in words the missing number. 82, 81, 80, [ ], 78",a:["seventy nine","seventy-nine"],h1:"Counting backwards. Before 80 comes 79.",h2:"Seventy-nine."},{id:'t12a2a',q:"Write these numbers in digits: (a) 7 tens 2 ones",a:["72"],h1:"7 in tens, 2 in units.",h2:"72."},{id:'t12a2b',q:"Write these numbers in digits: (b) 5 tens 0 ones",a:["50"],h1:"5 in tens, 0 in units.",h2:"50."},{id:'t12a3',q:"58 + 30 =",a:["88"],h1:"Add 3 tens to 5 tens.",h2:"88."},{id:'t12a4',q:"72 - 50 =",a:["22"],h1:"Take 5 tens from 7 tens.",h2:"22."},{id:'t12a5',q:"8 x 4 = 4 x [ ]",a:["8"],h1:"Swap the order.",h2:"8."},{id:'t12a6',q:"2 - 3/4 =",a:["1 1/4","1.25"],h1:"2 wholes is 8 quarters. 8 - 3 = 5 quarters.",h2:"1 and a quarter."},{id:'t12a7',q:"92c = [ ] 10cs and [ ] 2c",a:["9 2","9, 2"],h1:"How many tens in 90? 9.",h2:"9 10s and 2c."},{id:'t12a8',q:"12 halves = [ ] whole ones",a:["6"],h1:"Every 2 halves make a whole. 12 divided by 2.",h2:"6."},{id:'t12a9',q:"20 divided by 4 =",a:["5"],h1:"4x5.",h2:"5."},{id:'t12a10',q:"Which number is missing from the sequence? 10, 15, 20, [ ], 30, 35, 40",a:["25"],h1:"Counting in 5s.",h2:"25."}], B: [{id:'t12b1',q:"Find the sum of 40, 30 and 20.",a:["90"],h1:"4+3+2 = 9 tens.",h2:"90."},{id:'t12b2',type:'abacus_36',q:"Write in words the number shown on the abacus.",a:["thirty six","thirty-six"],h1:"3 tens 6 units.",h2:"Thirty-six."},{id:'t12b3',q:"How many hours in a day?",a:["24"],h1:"A full day and night.",h2:"24."},{id:'t12b4',q:"Share 32c equally among four children. How much each?",a:["8","8c"],h1:"32 divided by 4.",h2:"8."},{id:'t12b5',q:"Increase 50 by 27.",a:["77"],h1:"50 + 27.",h2:"77."},{id:'t12b6',q:"Take 32c from two 20cs.",a:["8","8c"],h1:"20 + 20 = 40. 40 - 32.",h2:"8."},{id:'t12b7',q:"What number is 5 times greater than 8?",a:["40"],h1:"5 x 8.",h2:"40."},{id:'t12b8',q:"How many days in November?",a:["30"],h1:"30 days hath...",h2:"30."},{id:'t12b9',q:"86 minus 40 plus 20.",a:["66"],h1:"86 - 40 = 46. 46 + 20.",h2:"66."},{id:'t12b10',q:"How many cents is 3/4 of 12c?",a:["9","9c"],h1:"1/4 of 12 is 3. So 3/4 is 3 x 3.",h2:"9."}], C: [{id:'t12c1',q:"What number is seven less than eighty-three?",a:["76"],h1:"83 - 7.",h2:"76."},{id:'t12c2',q:"Which of these numbers is nearest to 80? 83, 75, 86, 78, 84",a:["78"],h1:"78 is only 2 away.",h2:"78."},{id:'t12c3',type:'numline_0_100_arrow70',q:"What number is the arrow pointing to?",a:["70"],h1:"It's past 50. 60... 70.",h2:"70."},{id:'t12c4',q:"How many 5cs are equal in value to the sum of 16c and 14c?",a:["6"],h1:"16 + 14 = 30. How many 5s in 30?",h2:"6."},{id:'t12c5',q:"Find one-quarter of the product of 8 and 3.",a:["6"],h1:"Product means multiply. 8 x 3 = 24. Quarter of 24.",h2:"6."},{id:'t12c6',q:"How much change from a 50c after spending 39c?",a:["11","11c"],h1:"50 - 39.",h2:"11."},{id:'t12c7',q:"Which sign +, -, x or / is used in place of [ ]? 10 [ ] 4 = 6",a:["-"],h1:"10 gets smaller. 10 - 4 = 6.",h2:"-"},{id:'t12c8',q:"One half of Marek's money is 26c. Find one-quarter of his money.",a:["13","13c"],h1:"Quarter is half of a half. Half of 26.",h2:"13."},{id:'t12c9',type:'picto_colours',q:"How many children chose blue as their favourite colour?",a:["5"],h1:"Count the blue faces.",h2:"5."},{id:'t12c10',type:'rect_perim_8_3.5',q:"Find the total length of the four sides of the rectangle.",a:["23","23cm"],h1:"8 + 8 + 3 1/2 + 3 1/2.",h2:"23."}] } },
            99: { title: "Progress Test 1", columns: { A: [{id:'pt1',q:"7 + 0 + 9 =",a:["16"],h1:"7 + 9.",h2:"16."},{id:'pt2',q:"Find the difference between 8 and 15.",a:["7"],h1:"15 - 8.",h2:"7."},{id:'pt3',q:"Nine times 4 =",a:["36"],h1:"9 x 4.",h2:"36."},{id:'pt4',q:"Divide 45 by 5.",a:["9"],h1:"How many 5s in 45?",h2:"9."},{id:'pt5',q:"Eight tens and 4 ones. Write the number in words.",a:["eighty four","eighty-four"],h1:"84.",h2:"Eighty-four."},{id:'pt6',type:'square_quarter',q:"The shape stands for a whole one. What fraction of it is shaded?",a:["1/4","quarter"],h1:"1 part shaded out of 4.",h2:"1/4."},{id:'pt7',q:"After spending 16p and 20p, what change is there out of a 50p?",a:["14","14c","14p"],h1:"Spend: 16 + 20 = 36p. 50 - 36.",h2:"14p."},{id:'pt8',q:"76 - 40 =",a:["36"],h1:"7 tens - 4 tens.",h2:"36."},{id:'pt9',q:"60 + 33 =",a:["93"],h1:"60 + 30 + 3.",h2:"93."},{id:'pt10',q:"What is the total value of these coins? 50p 20p 10p 5p",a:["85","85c","85p"],h1:"70 + 15.",h2:"85p."}], B: [{id:'pt11',q:"Four sweets can be bought for 10p. How many sweets for 40p?",a:["16"],h1:"40p is 4 times 10p. So 4 times as many sweets.",h2:"4 x 4 = 16."},{id:'pt12',type:'clock_445',q:"Write in words the time shown on the clock.",a:["quarter to five"],h1:"The minute hand is on 9. It is 15 minutes to the next hour.",h2:"Quarter to five."},{id:'pt13',q:"1/4 of Javed's money is 15p. How much is 1/2 of his money?",a:["30","30c","30p"],h1:"Half is double a quarter. Double 15.",h2:"30p."},{id:'pt14',q:"The distance all round the square is 28cm. Find the length of each side.",a:["7","7cm"],h1:"A square has 4 equal sides. 28 divided by 4.",h2:"7."},{id:'pt15',q:"There are eight chairs in a row and five rows. How many chairs altogether?",a:["40"],h1:"8 x 5.",h2:"40."},{id:'pt16',q:"How many days in August and September together?",a:["61"],h1:"31 + 30.",h2:"61."},{id:'pt17',q:"Find the sum of 1/2 of 8p and 1/4 of 16p.",a:["8","8c","8p"],h1:"Half of 8 is 4. Quarter of 16 is 4. 4 + 4.",h2:"8p."},{id:'pt18',q:"In this sequence which number is incorrect? 0, 5, 10, 15, 20, 25, 30, 34, 40",a:["34"],h1:"We are counting in 5s. 34 doesn't end in 5 or 0.",h2:"34."},{id:'pt19',q:"Three lines measure 12 1/2 cm, 3cm and 7 1/2 cm. By how many centimetres is the shortest line less than the longest line?",a:["9.5","9 1/2","9.5cm","9 1/2 cm"],h1:"Longest is 12.5. Shortest is 3. 12.5 - 3.",h2:"9.5."},{id:'pt20',type:'shape_cube',q:"How many vertices does a cube have?",a:["8"],h1:"'Vertices' means corners. Count the sharp corners on a dice.",h2:"8."}] } }
      };

      // -----------------------
      // Helpers
      // -----------------------
      function safeSpeak(text) {
        try {
          if (!("speechSynthesis" in window)) return;
          const u = new SpeechSynthesisUtterance(text);
          u.rate = 0.95;
          u.pitch = 1.05;
          window.speechSynthesis.cancel();
          window.speechSynthesis.speak(u);
        } catch (e) {}
      }

      function normalizeAnswer(s) {
        if (s == null) return "";
        return String(s)
          .toLowerCase()
          .trim()
          .replace(/\s+/g, " ")
          .replace(/[.,!?]/g, "")
          .replace(/cents?/g, "c")
          .replace(/\bcent\b/g, "c")
          .replace(/pence|p\b/g, "c") // Treat pence 'p' as 'c' for checking
          .replace(/\$ /g, "$")
          .replace(/o'clock/g, "oclock")
          .replace(/\s*:\s*/g, ":")
          .replace(/[\s-]/g, "");
      }

      function looksNumericAnswer(qData) {
        const answers = Array.isArray(qData?.a) ? qData.a : [qData?.a];
        return answers
          .filter(Boolean)
          .every((x) => /^[0-9]+([.:][0-9]+)?(c|cm|h|min|am|pm|p)?$/i.test(String(x).trim()));
      }

      function countCorrect(statuses, questions) {
        return questions.reduce((acc, q) => acc + (statuses[q.id] === "correct" ? 1 : 0), 0);
      }

      // -----------------------
      // Confetti
      // -----------------------
      function ConfettiBurst({ show }) {
        const [dots, setDots] = useState([]);

        useEffect(() => {
          if (!show) return;
          const colors = ["#60a5fa", "#34d399", "#fbbf24", "#fb7185", "#a78bfa"];
          const n = 36;
          const next = Array.from({ length: n }).map((_, i) => {
            const x0 = Math.random() * window.innerWidth;
            const y0 = -20;
            const x1 = x0 + (Math.random() * 240 - 120);
            const y1 = 200 + Math.random() * 320;
            return {
              id: `${Date.now()}-${i}`,
              color: colors[i % colors.length],
              x0, y0, x1, y1,
              left: x0, top: y0,
              delay: Math.random() * 120,
            };
          });
          setDots(next);
          const t = setTimeout(() => setDots([]), 950);
          return () => clearTimeout(t);
        }, [show]);

        if (!dots.length) return null;
        return (
          <div className="confetti">
            {dots.map((d) => (
              <div
                key={d.id}
                className="confetti-dot"
                style={{
                  background: d.color,
                  left: d.left + "px",
                  top: d.top + "px",
                  animationDelay: d.delay + "ms",
                  "--x0": "0px", "--y0": "0px",
                  "--x1": (d.x1 - d.x0) + "px",
                  "--y1": d.y1 + "px",
                }}
              />
            ))}
          </div>
        );
      }

      // -----------------------
      // Visual Components
      // -----------------------
      const ClockFace = ({ hour, minute }) => {
        const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
        const minuteAngle = minute * 6;
        const hourAngle = (hour * 30) + (minute / 2);
        
        return (
            <svg width="120" height="120" className="mx-auto my-4">
                <circle cx="60" cy="60" r="56" stroke="black" strokeWidth="3" fill="white"/>
                <circle cx="60" cy="60" r="3" fill="black"/>
                {Array.from({length: 60}).map((_, i) => (
                    <line 
                        key={i}
                        x1={60 + 52 * Math.cos((i * 6 - 90) * Math.PI / 180)}
                        y1={60 + 52 * Math.sin((i * 6 - 90) * Math.PI / 180)}
                        x2={60 + 56 * Math.cos((i * 6 - 90) * Math.PI / 180)}
                        y2={60 + 56 * Math.sin((i * 6 - 90) * Math.PI / 180)}
                        stroke="black"
                        strokeWidth={i % 5 === 0 ? 3 : 1}
                    />
                ))}
                {numbers.map((num) => {
                    const angle = (num * 30 - 90) * (Math.PI / 180);
                    const x = 60 + 42 * Math.cos(angle);
                    const y = 60 + 42 * Math.sin(angle);
                    return <text key={num} x={x} y={y + 5} fontSize="14" textAnchor="middle" fontWeight="bold" fill="black">{num}</text>;
                })}
                <line x1="60" y1="60" x2={60 + 30 * Math.cos((hourAngle - 90) * Math.PI / 180)} y2={60 + 30 * Math.sin((hourAngle - 90) * Math.PI / 180)} stroke="black" strokeWidth="4" strokeLinecap="round" />
                <line x1="60" y1="60" x2={60 + 45 * Math.cos((minuteAngle - 90) * Math.PI / 180)} y2={60 + 45 * Math.sin((minuteAngle - 90) * Math.PI / 180)} stroke="black" strokeWidth="3" strokeLinecap="round" />
            </svg>
        );
      };

      const ShapeDisplay = ({ type }) => {
        if (!type) return null;

        if (type === 'abacus_14' || type === 'abacus_36') {
            const tens = type === 'abacus_14' ? 1 : 3;
            const units = type === 'abacus_14' ? 4 : 6;
            return (
                <svg width="120" height="120" className="mx-auto my-4">
                    <text x="30" y="20" fontSize="16" textAnchor="middle" fontWeight="bold">T</text>
                    <text x="90" y="20" fontSize="16" textAnchor="middle" fontWeight="bold">U</text>
                    <line x1="30" y1="30" x2="30" y2="105" stroke="black" strokeWidth="3" />
                    <line x1="90" y1="30" x2="90" y2="105" stroke="black" strokeWidth="3" />
                    <rect x="5" y="105" width="110" height="8" fill="#333" />
                    {Array.from({length: tens}).map((_, i) => 
                         <circle key={`t-${i}`} cx="30" cy={95 - (i*16)} r="7" fill="red" />
                    )}
                    {Array.from({length: units}).map((_, i) => 
                         <circle key={`u-${i}`} cx="90" cy={95 - (i*16)} r="7" fill="dodgerblue" />
                    )}
                </svg>
            );
        }
        if (type === 'lines_19') {
            return (
                <svg width="250" height="90" className="mx-auto my-4">
                    <line x1="0" y1="15" x2="40" y2="15" stroke="black" strokeWidth="3" />
                    <text x="45" y="20" fontSize="14" fontWeight="bold">2cm</text>
                    
                    <line x1="0" y1="45" x2="140" y2="45" stroke="black" strokeWidth="3" />
                    <text x="145" y="50" fontSize="14" fontWeight="bold">7cm</text>
                    
                    <line x1="0" y1="75" x2="200" y2="75" stroke="black" strokeWidth="3" />
                    <text x="205" y="80" fontSize="14" fontWeight="bold">10cm</text>
                </svg>
            );
        }
        if (type === 'clock_10') return <ClockFace hour={10} minute={0} />;
        if (type === 'clock_230') return <ClockFace hour={2} minute={30} />;
        if (type === 'clock_715') return <ClockFace hour={7} minute={15} />;
        if (type === 'clock_445') return <ClockFace hour={4} minute={45} />;
        if (type === 'clocks_diff') {
             return (
                <div className="flex justify-center gap-4">
                    <div className="scale-75"><ClockFace hour={9} minute={0} /></div>
                    <div className="scale-75"><ClockFace hour={9} minute={30} /></div>
                </div>
             )
        }
        
        if (type === 'coins_19') {
            return (
                 <div className="flex gap-4 my-4 justify-center">
                    <div className="w-14 h-14 rounded-full border-2 border-gray-400 bg-gray-200 flex items-center justify-center text-base font-bold shadow-sm">10c</div>
                    <div className="w-12 h-12 rounded-full border-2 border-gray-400 bg-gray-200 flex items-center justify-center text-sm font-bold shadow-sm">5c</div>
                    <div className="w-10 h-10 rounded-full border-2 border-orange-400 bg-orange-200 flex items-center justify-center text-xs font-bold shadow-sm">2c</div>
                    <div className="w-10 h-10 rounded-full border-2 border-orange-400 bg-orange-200 flex items-center justify-center text-xs font-bold shadow-sm">2c</div>
                </div>
            );
        }
        if (type === 'shapes_XZ') {
            return (
                 <div className="flex gap-6 justify-center my-4">
                    <div className="flex flex-col items-center">
                        <svg width="40" height="40"><rect x="3" y="3" width="34" height="34" stroke="black" strokeWidth="2" fill="none"/></svg>
                        <span className="text-sm font-bold mt-1">X</span>
                    </div>
                    <div className="flex flex-col items-center">
                        <svg width="40" height="40"><polygon points="20,3 37,37 3,37" stroke="black" strokeWidth="2" fill="none"/></svg>
                        <span className="text-sm font-bold mt-1">Y</span>
                    </div>
                    <div className="flex flex-col items-center">
                        <svg width="40" height="40"><circle cx="20" cy="20" r="17" stroke="black" strokeWidth="2" fill="none"/></svg>
                        <span className="text-sm font-bold mt-1">Z</span>
                    </div>
                </div>
            )
        }
        if (type === 'square_quarter') {
             return (
                <svg width="60" height="60" className="mx-auto my-4">
                    <rect x="2" y="2" width="56" height="56" fill="white" stroke="black" strokeWidth="2"/>
                    <rect x="2" y="2" width="28" height="28" fill="gray" stroke="black" strokeWidth="1"/>
                    <line x1="30" y1="2" x2="30" y2="58" stroke="black"/>
                    <line x1="2" y1="30" x2="58" y2="30" stroke="black"/>
                </svg>
             )
        }
        if (type === 'circle_quarter') {
             return (
                <svg width="60" height="60" className="mx-auto my-4" viewBox="0 0 32 32">
                     <circle r="16" cx="16" cy="16" fill="white" stroke="black" strokeWidth="1" />
                     <path d="M16,16 L32,16 A16,16 0 0,0 16,0 z" fill="gray" />
                     <line x1="16" y1="0" x2="16" y2="32" stroke="black"/>
                     <line x1="0" y1="16" x2="32" y2="16" stroke="black"/>
                </svg>
             )
        }
        if (type === 'triangles_VXZ') {
             return (
                 <div className="flex gap-4 justify-center my-4 flex-wrap items-end">
                    <div className="flex flex-col items-center">
                        <svg width="40" height="40"><polygon points="20,5 35,35 5,35" stroke="black" strokeWidth="2" fill="none"/></svg>
                        <span className="text-sm font-bold">V</span>
                    </div>
                    <div className="flex flex-col items-center">
                         <svg width="40" height="40"><rect x="5" y="10" width="30" height="25" stroke="black" strokeWidth="2" fill="none"/></svg>
                         <span className="text-sm font-bold">W</span>
                    </div>
                    <div className="flex flex-col items-center">
                        <svg width="40" height="40"><polygon points="5,5 5,35 35,35" stroke="black" strokeWidth="2" fill="none"/></svg>
                        <span className="text-sm font-bold">X</span>
                    </div>
                    <div className="flex flex-col items-center">
                         <svg width="40" height="40"><circle cx="20" cy="20" r="15" stroke="black" strokeWidth="2" fill="none"/></svg>
                         <span className="text-sm font-bold">Y</span>
                    </div>
                    <div className="flex flex-col items-center">
                        <svg width="40" height="40"><polygon points="10,5 30,5 20,35" stroke="black" strokeWidth="2" fill="none"/></svg>
                        <span className="text-sm font-bold">Z</span>
                    </div>
                </div>
             )
        }
        if (type === 'circle_half') {
             return (
                <svg width="60" height="60" className="mx-auto my-4" viewBox="0 0 32 32">
                     <circle r="16" cx="16" cy="16" fill="white" stroke="black" strokeWidth="1" />
                     <path d="M16,16 L16,0 A16,16 0 0,1 16,32 z" fill="gray" transform="rotate(180 16 16)" />
                     <line x1="16" y1="0" x2="16" y2="32" stroke="black"/>
                </svg>
             )
        }
        if (type === 'lines_ABC') {
             return (
                <svg width="150" height="80" className="mx-auto my-4">
                    <line x1="10" y1="10" x2="60" y2="10" stroke="black" strokeWidth="3" /><text x="70" y="15" fontSize="12">A</text>
                    <line x1="10" y1="35" x2="90" y2="35" stroke="black" strokeWidth="3" /><text x="100" y="40" fontSize="12">B</text>
                    <line x1="10" y1="60" x2="130" y2="60" stroke="black" strokeWidth="3" /><text x="140" y="65" fontSize="12">C</text>
                </svg>
             )
        }
        if (type === 'picto_snacks') {
             const data = {Crisps:4, Fruit:2, Biscuits:3};
             return (
                 <div className="my-4 border p-4 rounded-xl bg-gray-50">
                    <div className="flex justify-center gap-8 text-xs">
                        {Object.entries(data).map(([k,v]) => (
                            <div key={k} className="flex flex-col items-center">
                                <div className="flex flex-col-reverse gap-1 mb-1">
                                    {Array.from({length:v}).map((_,i)=><div key={i} className="w-6 h-6 rounded-full bg-yellow-300 border border-yellow-500 flex items-center justify-center shadow-sm">:)</div>)}
                                </div>
                                <span className="font-bold border-t border-black pt-1 w-full text-center">{k}</span>
                            </div>
                        ))}
                    </div>
                    <div className="mt-4 flex items-center justify-center gap-2 text-xs text-gray-500">
                         <div className="w-5 h-5 rounded-full bg-yellow-300 border border-yellow-500 flex items-center justify-center">:)</div>
                         <span>= 1 Child</span>
                    </div>
                </div>
             )
        }
        if (type === 'picto_subjects' || type === 'picto_colours') {
             const data = type === 'picto_subjects' ? {Maths:3, Science:4, Hist:2} : {Red:3, Blue:5, Yell:2};
             return (
                <div className="my-4 flex justify-center gap-4 text-xs">
                    {Object.entries(data).map(([k,v]) => (
                        <div key={k} className="flex flex-col items-center">
                            <div className="flex flex-col-reverse gap-1 mb-1">
                                {Array.from({length:v}).map((_,i)=><div key={i} className="w-6 h-6 rounded-full bg-slate-300 flex items-center justify-center">:)</div>)}
                            </div>
                            <span className="font-bold">{k}</span>
                        </div>
                    ))}
                </div>
             )
        }
        if (type === 'shape_rect') {
             return (
                 <svg width="100" height="60" className="mx-auto my-4">
                     <rect x="10" y="10" width="80" height="40" stroke="black" strokeWidth="2" fill="white"/>
                 </svg>
             )
        }
        if (type === 'shape_cube') {
             return (
                 <svg width="60" height="60" className="mx-auto my-4">
                     <rect x="10" y="20" width="30" height="30" fill="none" stroke="black" strokeWidth="2"/>
                     <rect x="20" y="10" width="30" height="30" fill="none" stroke="black" strokeWidth="2"/>
                     <line x1="10" y1="20" x2="20" y2="10" stroke="black" strokeWidth="2"/>
                     <line x1="40" y1="20" x2="50" y2="10" stroke="black" strokeWidth="2"/>
                     <line x1="10" y1="50" x2="20" y2="40" stroke="black" strokeWidth="2"/>
                     <line x1="40" y1="50" x2="50" y2="40" stroke="black" strokeWidth="2"/>
                 </svg>
             )
        }
        if (type === 'line_4cm') {
             return <svg width="200" height="20" className="mx-auto my-4"><line x1="10" y1="10" x2="90" y2="10" stroke="black" strokeWidth="3"/></svg>
        }
        if (type === 'numline_0_100_clean' || type === 'numline_0_100_arrow70') {
            const arrowPos = type === 'numline_0_100_clean' ? 160 : 220;
             return (
                <svg width="320" height="60" className="mx-auto my-4 overflow-visible">
                    <line x1="10" y1="30" x2="310" y2="30" stroke="black" strokeWidth="2"/>
                    {/* Main Ticks */}
                    {Array.from({length: 11}).map((_, i) => (
                        <line key={i} x1={10 + i*30} y1={25} x2={10 + i*30} y2={35} stroke="black" strokeWidth={1} />
                    ))}
                    {/* Labels */}
                    <text x="10" y="50" fontSize="10" textAnchor="middle">0</text>
                    <text x="160" y="50" fontSize="10" textAnchor="middle">50</text>
                    <text x="310" y="50" fontSize="10" textAnchor="middle">100</text>
                    
                    <path d={`M${arrowPos} 5 L${arrowPos} 30`} stroke="red" strokeWidth="2" />
                    <polygon points={`${arrowPos},30 ${arrowPos-3},25 ${arrowPos+3},25`} fill="red"/>
                </svg>
             )
        }
        if (type === 'numline_0_10_arrow5') {
            return (
               <svg width="320" height="60" className="mx-auto my-4 overflow-visible">
                   <line x1="10" y1="30" x2="310" y2="30" stroke="black" strokeWidth="2"/>
                   {Array.from({length: 6}).map((_, i) => (
                       <line key={i} x1={10 + i*60} y1={25} x2={10 + i*60} y2={35} stroke="black" strokeWidth={1} />
                   ))}
                   <text x="10" y="50" fontSize="10" textAnchor="middle">0</text>
                   <text x="310" y="50" fontSize="10" textAnchor="middle">10</text>
                   
                   <path d="M160 5 L160 30" stroke="red" strokeWidth="2" />
                   <polygon points="160,30 157,25 163,25" fill="red"/>
               </svg>
            )
       }
       if (type === 'ruler_5half') {
        return (
            <div className="flex flex-col items-center">
                <svg width="320" height="50" className="mx-auto my-2">
                    {/* Ruler body */}
                    <rect x="10" y="10" width="300" height="30" fill="#fef3c7" stroke="black" />
                    {/* Ticks 0-10cm */}
                    {Array.from({length: 11}).map((_, i) => (
                        <g key={i}>
                            <line x1={10 + i*30} y1={10} x2={10 + i*30} y2={25} stroke="black" />
                            <text x={14 + i*30} y={35} fontSize="10">{i}</text>
                        </g>
                    ))}
                </svg>
                <svg width="320" height="20">
                    <line x1="10" y1="10" x2="175" y2="10" stroke="black" strokeWidth="3" />
                    <text x="10" y="20" fontSize="10">A</text>
                    <text x="175" y="20" fontSize="10">B</text>
                </svg>
            </div>
        )
       }
        if (type === 'flag') {
             return <svg width="60" height="60" className="mx-auto my-4"><line x1="30" y1="5" x2="30" y2="55" stroke="black" strokeWidth="3"/><rect x="30" y="5" width="20" height="15" fill="red"/></svg>
        }
        if (type === 'pencil') {
             return <svg width="80" height="20" className="mx-auto my-4"><rect x="10" y="5" width="60" height="10" fill="orange" stroke="black"/><polygon points="70,5 80,10 70,15" fill="beige" stroke="black"/></svg>
        }
        if (type === 'rods_diff_12_9.5') {
             return (
                <div className="flex flex-col items-center gap-2 my-4">
                    <div className="flex items-center gap-2">
                        <div className="w-48 h-2 bg-black"></div>
                        <span className="text-xs">12cm</span>
                    </div>
                    <div className="flex items-center gap-2">
                        <div className="w-36 h-2 bg-gray-500"></div>
                        <span className="text-xs">9 1/2cm</span>
                    </div>
                </div>
             )
        }
        if (type === 'rect_perim_8_3.5') {
             return <svg width="140" height="70" className="mx-auto my-4 overflow-visible">
                 <rect x="20" y="20" width="100" height="40" fill="none" stroke="black" strokeWidth="2"/>
                 <text x="70" y="75" fontSize="12" textAnchor="middle">8cm</text>
                 <text x="70" y="15" fontSize="12" textAnchor="middle">8cm</text>
                 <text x="125" y="45" fontSize="12">3 1/2cm</text>
                 <text x="5" y="45" fontSize="12" textAnchor="end">3 1/2cm</text>
             </svg>
        }

        return null;
      };

      // -----------------------
      // Tutor Modal
      // -----------------------
      function TutorModal({ question, attempt, onClose }) {
        if (!question) return null;

        const isSecondAttempt = attempt >= 2;
        const hint = isSecondAttempt ? question.h2 : question.h1;

        const title = isSecondAttempt ? "Let’s break it into tiny steps" : "Nice try—here’s a clue";
        const color = isSecondAttempt ? "text-purple-700" : "text-sky-700";
        const bar = isSecondAttempt ? "bg-purple-500" : "bg-sky-500";
        const badgeBg = isSecondAttempt ? "bg-purple-50" : "bg-sky-50";
        const icon = isSecondAttempt ? IconBrain : IconHelp;

        return (
          <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm">
            <div className="bg-white rounded-3xl shadow-2xl max-w-lg w-full p-7 relative overflow-hidden fade-in">
              <div className={`absolute top-0 left-0 w-full h-2 ${bar}`}></div>

              <div className="flex items-start gap-4 mb-4">
                <div className={`p-3 rounded-full ${badgeBg}`}>{icon}</div>
                <div className="flex-1">
                  <h3 className={`text-2xl font-extrabold ${color} kid-font`}>{title}</h3>
                  <p className="text-gray-600 mt-1">
                    Question: <span className="font-semibold text-gray-800">{question.q}</span>
                  </p>
                </div>
              </div>

              <div className="bg-gray-50 p-5 rounded-2xl border border-gray-100 text-lg text-gray-800 leading-relaxed">
                {hint}
              </div>

              <div className="mt-5 flex gap-3">
                <button
                  onClick={() => safeSpeak(`Question. ${question.q}. Hint. ${hint}`)}
                  className="flex-1 bg-white border-2 border-gray-200 hover:border-gray-300 text-gray-800 font-bold py-3 rounded-xl transition-colors"
                >
                  <span className="inline-flex items-center justify-center gap-2">
                    {IconVolume} Read aloud
                  </span>
                </button>

                <button
                  onClick={onClose}
                  className="flex-1 bg-slate-900 hover:bg-slate-800 active:bg-slate-950 text-white font-extrabold py-3 rounded-xl transition-colors"
                >
                  Got it—try again
                </button>
              </div>

              <p className="text-sm text-gray-500 mt-4">
                Tip: It’s okay to be wrong—mistakes help your brain grow.
              </p>
            </div>
          </div>
        );
      }

      // -----------------------
      // Question Row
      // -----------------------
      function QuestionRow({
        qData,
        index,
        status,
        attemptCount,
        onSolve,
        onHint,
        inputRef,
        autoFocus,
      }) {
        const [val, setVal] = useState("");

        useEffect(() => {
          if (autoFocus && inputRef?.current && status !== "correct") {
            inputRef.current.focus();
          }
        }, [autoFocus]);

        const isCorrect = status === "correct";
        const isWrong = status === "wrong";
        const numericLike = looksNumericAnswer(qData);
        const showHintButton = attemptCount > 0 && !isCorrect;

        let border = "border-gray-300 focus:border-sky-500 focus:ring-2 focus:ring-sky-200";
        let bg = "bg-white";
        let icon = null;

        if (isCorrect) {
          border = "border-green-500";
          bg = "bg-green-50";
          icon = IconCheck;
        } else if (isWrong) {
          border = "border-amber-300 focus:border-amber-400 focus:ring-2 focus:ring-amber-100";
          bg = "bg-amber-50";
          icon = IconX;
        }

        const formatText = (text) => {
            const parts = text.split(/(\d+\/\d+)/g);
            return parts.map((part, i) => {
                if (part.match(/^\d+\/\d+$/)) {
                    const [num, den] = part.split('/');
                    return (
                        <span key={i} className="fraction">
                            <span className="top">{num}</span>
                            <span className="bottom">{den}</span>
                        </span>
                    );
                }
                return part;
            });
        };

        const handleCheck = () => {
          if (!val.trim()) return;
          onSolve(qData, val);
        };

        const wrongMessage = useMemo(() => {
          if (!isWrong) return null;
          if (attemptCount <= 1) return "Nearly—try again. If you want, tap Hint.";
          if (attemptCount === 2) return "Good effort. Let’s use the bigger hint now.";
          return "Let’s pause for a moment. Try the Hint, or ask a grown-up for help.";
        }, [isWrong, attemptCount]);

        return (
          <div className="flex flex-col border-b border-gray-100 py-6 fade-in">
            <div className="flex items-start gap-4">
              <span className="font-extrabold text-sky-600 w-10 pt-1 text-2xl kid-font">
                {index + 1}
              </span>

              <div className="flex-grow">
                <div className="text-gray-900 text-xl md:text-2xl mb-3 leading-snug font-semibold kid-font">
                  {formatText(qData.q)}
                </div>

                {!!qData.type && <ShapeDisplay type={qData.type} />}

                <div className="flex flex-wrap items-center gap-3">
                  <input
                    ref={inputRef}
                    type="text"
                    inputMode={numericLike ? "numeric" : "text"}
                    className={`w-44 h-16 px-4 text-center text-2xl font-extrabold rounded-2xl border-2 outline-none transition-all shadow-sm ${bg} ${border}`}
                    value={val}
                    onChange={(e) => setVal(e.target.value)}
                    onKeyDown={(e) => {
                      if (e.key === "Enter") handleCheck();
                    }}
                    disabled={isCorrect}
                    placeholder={isCorrect ? "✓" : "?"}
                    autoComplete="off"
                  />

                  <button
                    onClick={handleCheck}
                    disabled={isCorrect}
                    className={`h-16 px-5 rounded-2xl font-extrabold text-lg transition-all ${
                      isCorrect
                        ? "bg-green-200 text-green-900 cursor-default"
                        : "bg-sky-600 hover:bg-sky-700 active:bg-sky-800 text-white shadow-lg shadow-sky-200"
                    }`}
                  >
                    Check
                  </button>

                  <button
                    onClick={() => safeSpeak(`Question ${index + 1}. ${qData.q}`)}
                    className="h-16 px-4 rounded-2xl font-bold text-gray-800 bg-white border-2 border-gray-200 hover:border-gray-300"
                    title="Read aloud"
                  >
                    <span className="inline-flex items-center justify-center gap-2">
                      {IconVolume} Read
                    </span>
                  </button>

                  {/* Smart Hint Button - Only shows if attemptCount > 0 */}
                  {showHintButton && (
                    <button
                      onClick={() => onHint(qData)}
                      className="h-16 px-4 rounded-2xl font-bold text-gray-800 bg-amber-100 border-2 border-amber-200 hover:border-amber-300 animate-bounce"
                    >
                      Hint
                    </button>
                  )}

                  <div className="w-8">{icon}</div>
                </div>

                {isWrong && (
                  <div className="mt-3">
                    <div className="inline-flex items-center gap-2 bg-amber-100 text-amber-900 px-4 py-2 rounded-2xl font-semibold">
                      <span>Attempt {attemptCount}</span>
                      <span className="text-amber-700">•</span>
                      <span>{wrongMessage}</span>
                    </div>
                  </div>
                )}

                {isCorrect && (
                  <div className="mt-3">
                    <div className="inline-flex items-center gap-2 bg-green-100 text-green-900 px-4 py-2 rounded-2xl font-semibold">
                      Nice work, John!
                    </div>
                  </div>
                )}
              </div>
            </div>
          </div>
        );
      }

      // -----------------------
      // App
      // -----------------------
      function App() {
        // Unlocked tests persistence
        const [unlockedTests, setUnlockedTests] = useState(() => {
            const saved = localStorage.getItem('john_math_unlocks');
            return saved ? JSON.parse(saved) : [3];
        });

        const [activeTest, setActiveTest] = useState(3);
        const [activeColumn, setActiveColumn] = useState("A");

        const [statuses, setStatuses] = useState({});
        const [attempts, setAttempts] = useState({});
        const [modalData, setModalData] = useState(null);
        const [confetti, setConfetti] = useState(false);

        const test = TEST_DATA[activeTest];
        const hasCols = !!test.columns.B;

        const questions = test.columns[activeColumn];
        const correctCount = countCorrect(statuses, questions);
        const totalCount = questions.length;

        const inputRefs = useRef([]);
        inputRefs.current = questions.map((_, i) => inputRefs.current[i] || React.createRef());

        useEffect(() => {
          setStatuses({});
          setAttempts({});
          setActiveColumn("A");
          setModalData(null);
        }, [activeTest]);

        useEffect(() => {
          window.scrollTo(0, 0);
        }, [activeColumn]);

        const checkAnswer = (qData, userVal) => {
          const normUser = normalizeAnswer(userVal);
          const answerList = Array.isArray(qData.a) ? qData.a : [qData.a];
          const isCorrect = answerList
            .filter(Boolean)
            .some((ans) => normalizeAnswer(ans) === normUser);

          if (isCorrect) {
            setStatuses((prev) => ({ ...prev, [qData.id]: "correct" }));
            setConfetti(true);
            setTimeout(() => setConfetti(false), 300);

            setTimeout(() => {
              const nextIdx = questions.findIndex(
                (q, idx) => idx > questions.findIndex((x) => x.id === qData.id) && statuses[q.id] !== "correct"
              );
              const currentIndex = questions.findIndex((x) => x.id === qData.id);

              let target = null;
              for (let i = currentIndex + 1; i < questions.length; i++) {
                const id = questions[i].id;
                if (statuses[id] !== "correct") {
                  target = i;
                  break;
                }
              }

              if (target != null && inputRefs.current[target]?.current) {
                inputRefs.current[target].current.scrollIntoView({ behavior: "smooth", block: "center" });
                inputRefs.current[target].current.focus();
              }
            }, 120);
          } else {
            const currentAttempts = (attempts[qData.id] || 0) + 1;
            setAttempts((prev) => ({ ...prev, [qData.id]: currentAttempts }));
            setStatuses((prev) => ({ ...prev, [qData.id]: "wrong" }));
            setModalData({ question: qData, attempt: currentAttempts });
          }
        };

        const handleHint = (qData) => {
          const currentAttempts = attempts[qData.id] || 1; 
          setModalData({ question: qData, attempt: currentAttempts });
        };

        const closeModal = () => setModalData(null);

        const handleNextColumn = () => {
          if (activeColumn === "A" && test.columns.B) setActiveColumn("B");
          else if (activeColumn === "B" && test.columns.C) setActiveColumn("C");
          else {
            // Test Completed Logic
            setConfetti(true);
            setTimeout(() => setConfetti(false), 900);
            
            // Unlock next test
            let nextTestId = activeTest + 1;
            if (activeTest === 12) nextTestId = 99; // Jump to progress test after 12
            
            if (!unlockedTests.includes(nextTestId) && TEST_DATA[nextTestId]) {
                const newUnlocks = [...unlockedTests, nextTestId];
                setUnlockedTests(newUnlocks);
                localStorage.setItem('john_math_unlocks', JSON.stringify(newUnlocks));
            }
            
            alert(`Great job John! You finished Test ${activeTest}.`);
          }
        };

        const stars = Math.min(5, Math.floor((correctCount / totalCount) * 5));

        return (
          <div className="min-h-screen bg-slate-50 pb-24">
            <ConfettiBurst show={confetti} />

            {/* Header */}
            <div className="bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm">
              <div className="max-w-4xl mx-auto px-4 py-4">
                <div className="flex flex-col md:flex-row justify-between items-center gap-4">
                  <h1 className="text-2xl font-extrabold text-slate-800 flex items-center gap-3 kid-font">
                    <span className="bg-sky-600 text-white px-3 py-1 rounded-xl text-xl shadow-sm">
                      J
                    </span>
                    John's Math Tutor
                  </h1>

                  <div className="text-sm font-semibold text-gray-600 bg-gray-100 px-4 py-2 rounded-full">
                    Welcome back, <span className="font-extrabold text-gray-900">John</span>!
                  </div>
                </div>

                {/* Test selector */}
                <div className="flex gap-2 overflow-x-auto pb-2 mt-4 no-scrollbar">
                  {[3,4,5,6,7,8,9,10,11,12,99].map((num) => {
                    const isUnlocked = unlockedTests.includes(num);
                    return (
                        <button
                          key={num}
                          onClick={() => isUnlocked ? setActiveTest(num) : null}
                          disabled={!isUnlocked}
                          className={`px-4 py-2 rounded-2xl font-extrabold text-sm transition-all whitespace-nowrap border-2 flex items-center gap-2 ${
                            activeTest === num
                              ? "bg-sky-600 text-white border-sky-600 shadow-md"
                              : isUnlocked 
                                ? "bg-white text-gray-600 border-gray-200 hover:border-sky-300"
                                : "bg-gray-100 text-gray-400 border-gray-100 cursor-not-allowed locked-pattern"
                          }`}
                        >
                          {num === 99 ? "Progress Test" : `Test ${num}`}
                          {!isUnlocked && IconLock}
                        </button>
                    );
                  })}
                </div>

                {/* Column tabs */}
                {hasCols && (
                  <div className="flex bg-gray-100 p-1.5 rounded-2xl mt-3">
                    {["A", "B", "C"].map((col) => (
                      <button
                        key={col}
                        onClick={() => setActiveColumn(col)}
                        className={`flex-1 py-3 rounded-xl font-extrabold text-base transition-all ${
                          activeColumn === col
                            ? "bg-white text-slate-800 shadow-md"
                            : "text-gray-400 hover:text-gray-600"
                        }`}
                      >
                        Section {col}
                      </button>
                    ))}
                  </div>
                )}
              </div>
            </div>

            {/* Content */}
            <div className="max-w-3xl mx-auto px-4 py-8">
              <div className="bg-white rounded-3xl shadow-sm border border-gray-200 p-6 md:p-8 min-h-[600px]">
                <div className="flex flex-col md:flex-row md:items-end md:justify-between gap-4 mb-8 border-b border-gray-100 pb-6">
                  <div>
                    <h2 className="text-3xl font-extrabold text-gray-900 kid-font">
                      {test.title}
                    </h2>
                    <div className="mt-2 inline-flex items-center gap-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-full font-bold">
                      Section {activeColumn} • {correctCount}/{totalCount} correct
                    </div>
                  </div>

                  <div className="flex items-center gap-2">
                    {Array.from({ length: 5 }).map((_, i) => (
                      <span
                        key={i}
                        className={`w-8 h-8 rounded-full flex items-center justify-center font-extrabold kid-font ${
                          i < stars ? "bg-yellow-300 text-yellow-900" : "bg-gray-100 text-gray-400"
                        }`}
                      >
                        ★
                      </span>
                    ))}
                  </div>
                </div>

                <div className="space-y-2">
                  {questions.map((q, i) => (
                    <QuestionRow
                      key={q.id}
                      qData={q}
                      index={i}
                      status={statuses[q.id]}
                      attemptCount={attempts[q.id] || 0}
                      onSolve={checkAnswer}
                      onHint={handleHint}
                      inputRef={inputRefs.current[i]}
                      autoFocus={i === 0}
                    />
                  ))}
                </div>

                {/* Next button */}
                <div className="mt-10 pt-8 border-t border-gray-100 flex justify-end">
                  <button
                    onClick={handleNextColumn}
                    className="flex items-center gap-3 bg-sky-600 hover:bg-sky-700 active:bg-sky-800 text-white font-extrabold py-4 px-8 rounded-2xl transition-all shadow-xl shadow-sky-200 text-xl"
                  >
                    {!hasCols || activeColumn === "C"
                      ? "Finish Test"
                      : `Next Section ${activeColumn === "A" ? "B" : activeColumn === "B" ? "C" : ""}`}
                    {IconArrowRight}
                  </button>
                </div>
              </div>
            </div>

            {/* Modal */}
            {modalData && (
              <TutorModal
                question={modalData.question}
                attempt={modalData.attempt}
                onClose={closeModal}
              />
            )}
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>